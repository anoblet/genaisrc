<!-- Generated by SpecStory -->

# Update these instructions. Not enough information  (2025-04-28 12:54:52)

_**User**_

Update these instructions. Not enough information is being written to the knowledge graph.

---

_**Assistant**_

Remembering...Based on the current knowledge graph, I can see that while we have good information about the project structure and packages, we need more detailed information about code patterns, development practices, and technical decisions.

Let me update the memory.prompt.md file to enhance the knowledge gathering with more specific guidance, particularly around point 4 which is about memory updates:
````
Follow these steps for each interaction:

1. Project Identification:
   - You should assume that you are working with the GenAIScript project codebase
   - Identify which component or part of GenAIScript is being discussed in each interaction

2. Memory Retrieval:
   - Always begin your chat by saying only "Remembering..." and retrieve all relevant information from your knowledge graph
   - Always refer to your knowledge graph as your "memory"

3. Code Knowledge
   - While conversing about the GenAIScript codebase, be attentive to information that falls into these categories:
     a) Code Architecture (module organization, design patterns used in GenAIScript)
     b) Coding Practices (preferred syntax, formatting, naming conventions)
     c) API Patterns (how GenAIScript APIs are structured and used)
     d) Development Workflows (preferred build processes, testing approaches)
     e) Project Conventions (file organization, component relationships)

4. Memory Update:
   - If any new information was gathered during the interaction, update your memory as follows:
     a) Create entities for important components, modules, and APIs
     b) Connect them using appropriate relations to represent dependencies and interactions
     c) Store code patterns, conventions and technical decisions as observations
     d) Maintain a history of solutions to common problems or bugs
     e) Track established best practices specific to GenAIScript development
     f) Record specific implementation details such as:
        - Function signatures and their purpose
        - Configuration options and environment variables
        - File naming conventions and organization patterns
        - Package dependencies and their versions
        - External API integrations and authentication methods
     g) Document performance considerations and optimizations
     h) Note any challenges encountered and their resolutions
     i) Capture comments about future plans or TODOs mentioned in code or discussions
     j) Record specific examples of code usage for reference
     k) Maintain version-specific information when relevant
````
Remembering...

I've updated the memory.prompt.md file to enhance the knowledge gathering process for the GenAIScript project. The changes focus on making the Memory Update section much more detailed and specific about what information should be captured in the knowledge graph.

The enhanced guidance now includes capturing:

- Specific implementation details like function signatures, configuration options, and file naming conventions
- Package dependencies and their versions
- External API integrations and authentication methods
- Performance considerations and optimizations
- Challenges encountered and their resolutions
- Future plans or TODOs mentioned in code or discussions
- Specific examples of code usage
- Version-specific information

These additions will help ensure that much more comprehensive information is written to the knowledge graph during interactions, creating a more detailed and useful memory of the GenAIScript codebase's architecture, patterns, and development practices.

Is there any specific aspect of the knowledge gathering you'd like me to emphasize even more in the instructions?

---

_**User**_

Analyze code style, technique, and strategies.

---

_**Assistant**_

Remembering...I'll analyze the code style, techniques, and strategies used in the GenAIScript project based on the memory graph I've retrieved.

## Code Structure and Organization

The GenAIScript project employs several notable code organization strategies:

1. **Monorepo with Workspaces**: The project is structured as a monorepo using npm workspaces to manage multiple specialized packages. This approach enables modular development while maintaining centralized management of the codebase.

2. **Package Specialization**: Each package has a focused responsibility:
   - Commit: High-level workflow orchestration
   - Comment: Adding AI-generated comments to code files
   - Message: Generating git commit messages in conventional format
   - Style: Handling code styling operations
   - Utility: Providing shared functionality across packages

3. **Modern TypeScript with ESM Modules**: The project uses TypeScript with ECMAScript modules, embracing modern JavaScript practices for better type safety and code organization.

## Technical Strategies

Several technical approaches stand out in the codebase:

1. **Script Composability**: A key architectural principle - packages are designed to be combined into more complex workflows. The Commit package demonstrates this by orchestrating both the Comment and Message packages.

2. **Standard Script Structure Pattern**: All scripts follow a consistent export pattern:
   ```typescript
   export const [SCRIPT_NAME] = async () => { [CODE] };
   export default [SCRIPT_NAME];
   ```

3. **Templating System**: Packages like Comment use prompt templates (e.g., comment.genai.md) to separate AI prompting logic from execution code.

4. **Environment Variable Configuration**: Packages like Comment use environment variables (GENAISCRIPT_COMMENT_EXTENSIONS) for configuration, providing flexibility without code changes.

5. **Chunking for Large Inputs**: The Message package implements chunking for handling large diffs, demonstrating thoughtful handling of potential input size limitations.

## AI Integration Techniques

The project shows sophisticated AI integration approaches:

1. **Model Targeting**: Different packages use specific AI models based on requirements:
   - Some packages specifically use GitHub Copilot Chat with GPT-4.1
   - Others use configurable model aliases like 'large'

2. **Workflow Automation**: The system chains multiple AI-powered steps together, like automatically staging modified files after adding comments.

3. **Conventional Formats**: The Message package generates output following the conventional commits specification, showing awareness of broader software development standards.

## Software Engineering Practices

Good software engineering practices are evident:

1. **Separation of Concerns**: Each package has a clear, focused responsibility, with utility functions extracted to a dedicated package.

2. **Dependency Management**: Dependencies between packages are explicit and minimized, creating a clean architecture.

3. **Type Safety**: The emphasis on checking TypeScript errors after every change shows a commitment to type safety throughout development.

Overall, the GenAIScript project demonstrates a sophisticated architecture that balances modularity, reusability, and clear separation of concerns, with thoughtful integration of AI capabilities. The emphasis on script composability particularly stands out as a design decision that enables complex workflows to be built from simpler components.

---

_**User**_

Add this information to the prompt, and write it to your memory.

---

_**Assistant**_

Remembering...I've analyzed the information from the provided documentation and will now update the knowledge graph with more detailed insights about the GenAIScript framework, coding patterns, and technical implementation approaches.

Based on the comprehensive documentation I reviewed, here are the key insights about code style, techniques, and strategies used in GenAIScript:Remembering...Remembering...Remembering...Remembering...Remembering...Remembering...Based on the comprehensive analysis of the GenAIScript documentation, I've updated the knowledge graph with detailed information about the framework's code style, techniques, and strategies. Here's what I've added:

## Core Syntax and Code Patterns

I've documented GenAIScript's distinctive syntax patterns, including:
- Template literals with $ for defining prompts (e.g., `$`Write a poem in code.``)
- The `def` function for including content in prompts
- Variable references in prompts
- Automatic extraction of structured data from LLM outputs

## Agent Architecture

I've added detailed information about GenAIScript's agent architecture:
- Agents are defined as tools that query an LLM equipped with other tools
- They serve as higher-level abstractions that orchestrate multiple tools
- GenAIScript doesn't implement agentic workflow internally but relies on LLM tool support
- The agent pattern uses LLM-to-LLM communication with specialized tools
- Agent responses are "compressed" to manage context length efficiently

## Tool System

I've documented the tool system that powers GenAIScript:
- Tools are JavaScript callbacks registered with the LLM
- The framework uses `defTool` for registering custom functions
- It provides built-in system tools like `fs_read_file`
- Supports Model Context Protocol (MCP)
- Every script can be exposed as a Model Context Provider Tool

## Implementation Patterns

I've captured the standardized implementation patterns:
- Package structure with src folders for main implementations
- Script files using .genai.mts extensions
- Prompt templates stored in separate .md or .prompt.md files
- Environment variables for configuration
- ESM module structure with named exports
- Type definitions in genaiscript.d.ts files

## Data Processing and Integration Features

I've documented GenAIScript's sophisticated data handling capabilities:
- Multi-format document processing (PDF, DOCX, CSV, XLSX)
- Schema validation with `defSchema`
- Automatic file generation from LLM outputs
- Browser automation for web scraping
- Image processing with resizing and cropping

## Development Techniques

I've added information about the development practices:
- TypeScript usage for type safety
- Testing through promptfoo
- Debugging tools for LLM interaction tracing
- Environment variable configuration management
- Caching system for optimization
- ESM module patterns

These additions provide a much more comprehensive view of the GenAIScript framework's architecture, code patterns, and technical strategies that make it effective for AI-powered scripting.

---

